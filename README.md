# Weather Report PDF Generator

Reactì™€ Puppeteerë¥¼ í™œìš©í•œ A4 ê·œê²© ê¸°ìƒ ë¦¬í¬íŠ¸ ì‘ì„± ë° PDF ìƒì„± ì‹œìŠ¤í…œì…ë‹ˆë‹¤.

## ğŸ“‹ í”„ë¡œì íŠ¸ ê°œìš”

ì›¹ ê¸°ë°˜ ë¦¬í¬íŠ¸ ì €ì‘/ë¯¸ë¦¬ë³´ê¸° ë„êµ¬ë¡œ, React í˜ì´ì§€ì—ì„œ í…ìŠ¤íŠ¸, ì´ë¯¸ì§€, í‘œ ë“±ì˜ ìš”ì†Œë¥¼ ì¡°í•©í•˜ì—¬ A4 ê·œê²©ì˜ ê¸°ìƒ ë¦¬í¬íŠ¸ë¥¼ ì‘ì„±í•˜ê³ , Puppeteerë¥¼ í†µí•´ ê³ í’ˆì§ˆ PDFë¡œ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ì£¼ìš” ê¸°ëŠ¥

- âœï¸ **ì›¹ ê¸°ë°˜ ë¦¬í¬íŠ¸ í¸ì§‘**: í…ìŠ¤íŠ¸, ì´ë¯¸ì§€, í‘œ ë¸”ë¡ì„ ì¡°í•©í•˜ì—¬ ë¦¬í¬íŠ¸ ì‘ì„±
- ğŸ“„ **A4 í˜ì´ì§€ ë ˆì´ì•„ì›ƒ**: ê³ ì • ë†’ì´(210mm Ã— 297mm) ì˜ì—­ìœ¼ë¡œ í˜ì´ì§€ êµ¬ë¶„
- ğŸ¨ **ì‹¤ì‹œê°„ ë¯¸ë¦¬ë³´ê¸°**: í¸ì§‘ ë‚´ìš©ì„ ì¦‰ì‹œ í™•ì¸
- âš ï¸ **ë ˆì´ì•„ì›ƒ ê²€ì¦**: í˜ì´ì§€ ì˜¤ë²„í”Œë¡œìš° ìë™ ê°ì§€ ë° ê²½ê³ 
- ğŸ“¥ **PDF ë‹¤ìš´ë¡œë“œ**: Puppeteer ê¸°ë°˜ ê³ í’ˆì§ˆ PDF ìƒì„± ë° ë‹¤ìš´ë¡œë“œ
- ğŸ”§ **ë¸”ë¡ í¸ì§‘**: ê° ë¸”ë¡ì˜ ì†ì„±(ìŠ¤íƒ€ì¼, ì •ë ¬, ë‚´ìš©) ìˆ˜ì • ê°€ëŠ¥

## ğŸ—ï¸ ì‹œìŠ¤í…œ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          HTTP/REST          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  React Frontend        â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  Node.js Server    â”‚
â”‚  (Vite + TypeScript)   â”‚                              â”‚  (Express +        â”‚
â”‚  - ReportRenderer      â”‚ â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚   Puppeteer)       â”‚
â”‚  - EditorPanel         â”‚       PDF Binary             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ› ï¸ ê¸°ìˆ  ìŠ¤íƒ

### Frontend
- **React** 19.1.1
- **TypeScript** 5.9.3
- **Vite** 7.1.7
- **CSS Modules**

### Backend
- **Node.js** (TypeScript)
- **Express** 4.21.1
- **Puppeteer** 23.7.1
- **tsx** (ê°œë°œìš© TypeScript ì‹¤í–‰)

## ğŸ“¦ ì„¤ì¹˜ ë°©ë²•

### ì‚¬ì „ ìš”êµ¬ì‚¬í•­
- Node.js 18 ì´ìƒ
- npm ë˜ëŠ” pnpm

### 1. ì €ì¥ì†Œ í´ë¡ 
```bash
git clone <repository-url>
cd weather-report
```

### 2. í”„ë¡ íŠ¸ì—”ë“œ ì„¤ì¹˜
```bash
cd frontend
npm install
```

### 3. ë°±ì—”ë“œ ì„¤ì¹˜
```bash
cd ../server
npm install
```

## ğŸš€ ì‹¤í–‰ ë°©ë²•

### ê°œë°œ ëª¨ë“œ

#### 1. ë°±ì—”ë“œ ì„œë²„ ì‹¤í–‰
```bash
cd server
npm run dev
```
ì„œë²„ê°€ `http://localhost:4000`ì—ì„œ ì‹¤í–‰ë©ë‹ˆë‹¤.

#### 2. í”„ë¡ íŠ¸ì—”ë“œ ì‹¤í–‰
```bash
cd frontend
npm run dev
```
í”„ë¡ íŠ¸ì—”ë“œê°€ `http://localhost:5173`ì—ì„œ ì‹¤í–‰ë©ë‹ˆë‹¤.

### í”„ë¡œë•ì…˜ ë¹Œë“œ

#### í”„ë¡ íŠ¸ì—”ë“œ ë¹Œë“œ
```bash
cd frontend
npm run build
```

#### ì„œë²„ ì‹¤í–‰
```bash
cd server
npm start
```

## ğŸ“‚ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
weather-report/
â”œâ”€â”€ docs/
â”‚   â””â”€â”€ architecture-plan.md       # ì‹œìŠ¤í…œ ì„¤ê³„ ë¬¸ì„œ
â”œâ”€â”€ frontend/                      # React í”„ë¡ íŠ¸ì—”ë“œ
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ report/
â”‚   â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ EditorPanel.tsx     # ë¸”ë¡ í¸ì§‘ íŒ¨ë„
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ReportRenderer.tsx  # ë¦¬í¬íŠ¸ ë Œë”ëŸ¬
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ report.css
â”‚   â”‚   â”‚   â”œâ”€â”€ sampleReport.ts         # ìƒ˜í”Œ ë°ì´í„°
â”‚   â”‚   â”‚   â””â”€â”€ types.ts                # íƒ€ì… ì •ì˜
â”‚   â”‚   â”œâ”€â”€ App.tsx                     # ë©”ì¸ ì•± ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â””â”€â”€ main.tsx
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ server/                        # Node.js ë°±ì—”ë“œ
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ app.ts                 # Express ì„œë²„ ë©”ì¸
â”‚   â”‚   â”œâ”€â”€ reportHtml.ts          # HTML ë Œë”ë§
â”‚   â”‚   â”œâ”€â”€ reportTypes.ts         # íƒ€ì… ì •ì˜
â”‚   â”‚   â””â”€â”€ sampleReport.ts        # ìƒ˜í”Œ ë°ì´í„°
â”‚   â””â”€â”€ package.json
â””â”€â”€ README.md
```

## ğŸ“¡ API ì—”ë“œí¬ì¸íŠ¸

### `POST /api/pdf`
ë¦¬í¬íŠ¸ ë°ì´í„°ë¥¼ ë°›ì•„ PDF íŒŒì¼ì„ ìƒì„±í•©ë‹ˆë‹¤.

**ìš”ì²­ ë³¸ë¬¸:**
```json
{
  "document": {
    "id": "report-id",
    "title": "ë¦¬í¬íŠ¸ ì œëª©",
    "pages": [...],
    "createdAt": "2025-10-22T00:00:00.000Z"
  }
}
```

**ì‘ë‹µ:**
- Content-Type: `application/pdf`
- PDF ë°”ì´ë„ˆë¦¬ ë°ì´í„°

### `POST /api/html`
ë¦¬í¬íŠ¸ ë°ì´í„°ë¥¼ ë°›ì•„ ë Œë”ë§ëœ HTMLì„ ë°˜í™˜í•©ë‹ˆë‹¤.

**ì‘ë‹µ:**
- Content-Type: `text/html`
- ë Œë”ë§ëœ HTML ë¬¸ìì—´

### `GET /health`
ì„œë²„ ìƒíƒœë¥¼ í™•ì¸í•©ë‹ˆë‹¤.

**ì‘ë‹µ:**
```json
{
  "status": "ok",
  "timestamp": "2025-10-22T00:00:00.000Z"
}
```

## ğŸ¨ ë°ì´í„° ëª¨ë¸

### ReportDocument
```typescript
type ReportDocument = {
  id: string;
  title: string;
  pages: ReportPage[];
  metadata?: Record<string, unknown>;
  createdAt: string;
};
```

### ReportPage
```typescript
type ReportPage = {
  id: string;
  blocks: ReportBlock[];
  header?: HeaderFooterConfig;
  footer?: HeaderFooterConfig;
};
```

### ReportBlock
```typescript
type ReportBlock =
  | { type: 'text'; id: string; content: string; style?: TextStyle }
  | { type: 'image'; id: string; src: string; caption?: string; layout?: ImageLayout }
  | { type: 'table'; id: string; columns: TableColumn[]; rows: TableRow[]; caption?: string }
  | { type: 'divider'; id: string; variant?: 'solid' | 'dashed' }
  | { type: 'pageBreak'; id: string };
```

## ğŸ”§ í™˜ê²½ ë³€ìˆ˜

### Frontend
`.env` íŒŒì¼ì„ ìƒì„±í•˜ì—¬ ì„¤ì •:
```env
VITE_PDF_ENDPOINT=http://localhost:4000/api/pdf
```

### Backend
```env
PORT=4000
```

## âš ï¸ ì£¼ì˜ì‚¬í•­

1. **í°íŠ¸ ì„¤ì •**: Puppeteer í™˜ê²½ì— í•œê¸€ í°íŠ¸(ë‚˜ëˆ”ê³ ë”• ë“±)ê°€ ì„¤ì¹˜ë˜ì–´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.
2. **í˜ì´ì§€ ì˜¤ë²„í”Œë¡œìš°**: ê° í˜ì´ì§€ëŠ” A4 ë†’ì´ë¥¼ ì´ˆê³¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì˜¤ë²„í”Œë¡œìš° ë°œìƒ ì‹œ PDF ìƒì„±ì´ ì°¨ë‹¨ë©ë‹ˆë‹¤.
3. **ë©”ëª¨ë¦¬ ê´€ë¦¬**: PuppeteerëŠ” ìƒë‹¹í•œ ë©”ëª¨ë¦¬ë¥¼ ì‚¬ìš©í•˜ë¯€ë¡œ ì„œë²„ ë¦¬ì†ŒìŠ¤ë¥¼ ê³ ë ¤í•´ì•¼ í•©ë‹ˆë‹¤.
4. **ë³´ì•ˆ**: ì™¸ë¶€ URL ì´ë¯¸ì§€ ë¡œë”© ì‹œ SSRF ìœ„í—˜ì´ ìˆìœ¼ë¯€ë¡œ í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œëŠ” í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸ ì„¤ì •ì„ ê¶Œì¥í•©ë‹ˆë‹¤.

## ğŸ›£ï¸ í–¥í›„ ê³„íš

- [ ] ë°ì´í„°ë² ì´ìŠ¤ ì—°ë™ (ë¦¬í¬íŠ¸ ì €ì¥/ë¶ˆëŸ¬ì˜¤ê¸°)
- [ ] ë“œë˜ê·¸ ì•¤ ë“œë¡­ ë¸”ë¡ ì¬ë°°ì¹˜
- [ ] ë¦¬ì¹˜í…ìŠ¤íŠ¸ ì—ë””í„° (Quill/Tiptap) í†µí•©
- [ ] ì‚¬ìš©ì ì¸ì¦ ë° ê¶Œí•œ ê´€ë¦¬
- [ ] í…œí”Œë¦¿ ë²„ì „ ê´€ë¦¬
- [ ] ì´ë¯¸ì§€ ì—…ë¡œë“œ ê¸°ëŠ¥
- [ ] ë‹¤êµ­ì–´ ì§€ì›

## ğŸ“ ë¼ì´ì„ ìŠ¤

ì´ í”„ë¡œì íŠ¸ëŠ” ê³µê°œ í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤.

## ğŸ‘¥ ê¸°ì—¬

ë²„ê·¸ ë¦¬í¬íŠ¸ë‚˜ ê¸°ëŠ¥ ì œì•ˆì€ ì´ìŠˆë¥¼ í†µí•´ ì œì¶œí•´ì£¼ì„¸ìš”.
